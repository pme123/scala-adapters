@import pme123.adapters.server.entity.{ClientType, JOB_CLIENT, JOB_RESULTS}

@this(webJarsUtil: org.webjars.play.WebJarsUtil)
@(context: String
        , clientType: ClientType
        , websocketPath: String
        , assets: AssetsFinder)(implicit r: Request[_], rh: RequestHeader)

@views.html.adapters.mainDemo(assets = assets
    , webJarsUtil = webJarsUtil
)(title = "Demo Adapter"
    , icon = assets.withUrlPrefix(context).path("assets/images/favicon.png")
    , styles = Html("<link rel=\"stylesheet\" type=\"text/css\" href=\"" +assets.withUrlPrefix(context).path("assets/stylesheets/main.css") + "\">")
    , clientScripts = Html("<script src=\"" +assets.withUrlPrefix(context).path("assets/javascripts/versioned.js")+ "\" ></script>")
) {

    @scalajs.html.scripts("scala-adapters-client",
        routes.Assets.at(_).toString,
        name => getClass.getResource(s"/public/$name") != null)

    @if(clientType == JOB_CLIENT) {
        <script>client.JobProcessClient.main("@context", "@websocketPath");</script>
    } else if(clientType == JOB_RESULTS) {
        <script>client.JobResultsClient.main("@context", "@websocketPath");</script>
    } else {
        <script>client.DemoResultClient.main("@context", "@websocketPath");</script>
    }

}